<script type="text/javascript">
  RED.nodes.registerType('get-devices', {
    category: 'function',
    // color: "#29abe2",
    color: '#77d1bf',
    defaults: {
      name: { value: '' },
      aloesConfig: { value: '', type: 'aloes-config' },
      includeSensors: {
        value: false,
        required: true,
      },
      includeSensorsResources: {
        value: false,
        required: true,
      },
    },
    inputs: 1,
    outputs: 2,
    inputLabels: 'parameter for request',
    outputLabels: [
      'devices',
      'sensors',
      // "sensor-measurements",
    ],
    icon: 'file.png',
    // icon: "aloes-icon-mini.svg",
    label: function () {
      return this.name || 'get-devices';
    },
  });
</script>

<script type="text/html" data-template-name="get-devices">
    <div class="form-row">
      <label for="node-input-name"><i class="icon-tag"></i> Name</label>
      <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
      <label for="node-input-aloesConfig"><i class="icon-tag"></i> aloesConfig</label>
      <input type="text" id="node-input-aloesConfig" placeholder="Add new aloes config">
    </div>

    <hr>

    <p>Include : </p>
    <div class="form-row">
      <label for="node-input-includeSensors"><i class="icon-tag"></i> sensors</label>
      <input type="checkbox" id="node-input-includeSensors">
      <label for="node-input-includeSensorsResources"><i class="icon-tag"></i> sensors resources</label>
      <input type="checkbox" id="node-input-includeSensorsResources">
    </div>
</script>

<script type="text/html" data-help-name="get-devices">
  <p>A node to access all your devices on Aloes</p>

  <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload
            <span class="property-type">string | buffer</span>
        </dt>
        <dd> the payload of the message to publish. </dd>
        <dt class="optional">topic <span class="property-type">string</span></dt>
        <dd> the MQTT topic to publish to.</dd>
    </dl>

  <h3>Outputs</h3>
    <ol class="node-ports">
      <li>Devices
        <dl class="message-properties">
          <dt>payload <span class="property-type">array</span></dt>
          <dd>Devices found in your aloes account</dd>
        </dl>
      </li>
      <li>Sensors
        <dl class="message-properties">
          <dt>payload <span class="property-type">array</span></dt>
          <dd>Sensors found in your aloes account</dd>
        </dl>
      </li>
    </ol>

  <h3>Details</h3>
      <p><code>msg.payload</code> is used as the payload of the published message.
      If it contains an Object it will be converted to a JSON string before being sent.
      If it contains a binary Buffer the message will be published as-is.</p>
      <p>The topic used can be configured in the node or, if left blank, can be set
      by <code>msg.topic</code>.</p>
      <p>Likewise the QoS and retain values can be configured in the node or, if left
      blank, set by <code>msg.qos</code> and <code>msg.retain</code> respectively.</p>

  <h3>References</h3>
    <ul>
        <li><a>GitHub</a> - the nodes github repository</li>
    </ul>
</script>
