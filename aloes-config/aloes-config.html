<script type="text/javascript">
  RED.nodes.registerType('aloes-config', {
    category: 'config',
    defaults: {
      httpHost: { value: 'localhost', required: true },
      httpPort: {
        value: 8000,
        required: true,
        validate: RED.validators.number(),
      },
      httpApiRoot: {
        value: '/api',
        required: true,
        validate: function (v) {
          return typeof v === 'string' && v.startsWith('/') && !v.endsWith('/');
        },
      },
      httpSecure: {
        value: false,
        required: true,
      },
      mqttHost: { value: 'localhost', required: true },
      mqttPort: {
        value: 1883,
        required: true,
        validate: RED.validators.number(),
      },
      mqttSecure: {
        value: false,
        required: true,
      },
    },
    credentials: {
      email: { type: 'text', required: true },
      password: { type: 'password', required: true },
      token: { type: 'password' },
    },

    label: function () {
      return this.httpHost + ':' + this.httpPort;
    },
  });
</script>

<script type="text/html" data-template-name="aloes-config">

  <p>HTTP server : </p>
  <div class="form-row">
    <label for="node-config-input-httpHost"><i class="icon-bookmark"></i> HTTP Host</label>
    <input type="text" id="node-config-input-httpHost">
  </div>
  <div class="form-row">
    <label for="node-config-input-httpPort"><i class="icon-bookmark"></i> HTTP Port</label>
    <input type="text" id="node-config-input-httpPort">
  </div>
  <div class="form-row">
    <label for="node-config-input-httpApiRoot"><i class="icon-bookmark"></i> HTTP Api Root</label>
    <input type="text" id="node-config-input-httpApiRoot">
  </div>

  <hr>

  <p>MQTT broker : </p>
  <div class="form-row">
    <label for="node-config-input-mqttHost"><i class="icon-bookmark"></i> MQTT Host</label>
    <input type="text" id="node-config-input-mqttHost">
  </div>
  <div class="form-row">
    <label for="node-config-input-mqttPort"><i class="icon-bookmark"></i> MQTT Port</label>
    <input type="text" id="node-config-input-mqttPort">
  </div>

  <hr>
  
  <div class="form-row">
    <label for="node-config-input-httpSecure"><i class="icon-bookmark"></i> HTTP Secure</label>
    <input type="checkbox" id="node-config-input-httpSecure">
    <label for="node-config-input-mqttSecure"><i class="icon-bookmark"></i> MQTT Secure</label>
    <input type="checkbox" id="node-config-input-mqttSecure">
  </div>

  <hr>

  <p>Credentials : </p>
  <div class="form-row">
    <label for="node-config-input-email"><i class="icon-tag"></i> Email</label>
    <input type="email" id="node-config-input-email">
  </div>
  <div class="form-row">
    <label for="node-config-input-password"><i class="icon-tag"></i> Password</label>
    <input type="password" id="node-config-input-password">
  </div>
</script>
