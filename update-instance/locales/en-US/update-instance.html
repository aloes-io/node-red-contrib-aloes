<script type="text/html" data-help-name="update-instance">
  <p>A node to update a locally stored instance by key/value</p>
  <br>
  <p>You can pass all inputs via UI, using string or env. variable (${your_variable}), or directly via the message (except deviceName).</p>
  <p>One of topic or collection must be provided.</p>

  <h3>Inputs</h3>
  <dl class="message-properties">
    <dt>deviceName <span class="property-type">string</span></dt>
    <dd>Device name is used to define key for storage</dd>

    <dt>useTopic <span class="property-type">boolean</span></dt>
    <dd>Use the topic to generate storeKey</dd>

    <dt>saveInstances <span class="property-type">boolean</span></dt>
    <dd>Persist updated instance</dd>

    <dt class="optional">topic <span class="property-type">string</span></dt>
    <dd>Topic to generate storeKey</dd>

    <dt class="optional">collection <span class="property-type">string</span></dt>
    <dd>Type of the instance</dd>

    <dt>key <span class="property-type">string</span></dt>
    <dd>Sensor or device attribute to update</dd>

    <dt>payload <span class="property-type">any</span></dt>
    <dd>Sensor or device value</dd>

    <dt class="optional">instanceProperty <span class="property-type">string</span></dt>
    <dd>Sensor's OMA Object Id or device's attribute</dd>

    <dt class="optional">nativeNodeId <span class="property-type">string</span></dt>
    <dd>Native Node Id of the sensor</dd>

    <dt class="optional">nativeSensorId <span class="property-type">string</span></dt>
    <dd>Native Sensor Id</dd>
  </dl>

  <h3>Outputs</h3>
  <ol class="node-ports">
    <ol class="node-ports">
      <li>Device
        <dl class="message-properties">
          <dt>payload <span class="property-type">object</span></dt>
          <dd>Device instance</dd>
          <dt>collection <span class="property-type">string</span></dt>
          <dd>Aloes collection</dd>
          <dt>instanceName <span class="property-type">string</span></dt>
          <dd>Instance name used for storage</dd>
        </dl>
      </li>
      <li>Sensor
        <dl class="message-properties">
          <dt>payload <span class="property-type">object</span></dt>
          <dd>Sensor instance</dd>
          <dt>collection <span class="property-type">string</span></dt>
          <dd>Aloes collection</dd>
          <dt>instanceName <span class="property-type">string</span></dt>
          <dd>Instance name used for storage</dd>
        </dl>
      </li>
      <li>Measurement
        <dl class="message-properties">
          <dt>payload <span class="property-type">object</span></dt>
          <dd>Measurement instance</dd>
          <dt>collection <span class="property-type">string</span></dt>
          <dd>Aloes collection</dd>
          <dt>instanceName <span class="property-type">string</span></dt>
          <dd>Instance name used for storage</dd>
        </dl>
      </li>
    </ol>

  <h3>Details</h3>

  <h3>References</h3>
    <ul>
        <li><a href="https://github.com/aloes-io/node-red-contrib-aloes">GitHub</a> - the nodes github repository</li>
        <li><a href="https://aloes.frama.io/aloes-handlers/">Aloes handlers</a> - documentation</li>
        <li><a href="https://github.com/aloes-io/oma-json">OMA to JSON</a> - github repository</li>
        <li><a href="https://aloes.io/about?tab=docs">Aloes.io</a> - documentation</li>
    </ul>
</script>
